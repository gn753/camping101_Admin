(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{240:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/camplog",function(){return n(2018)}])},7907:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(6154);let r=i.Z.create({headers:{"Content-Type":"application/json"}});r.defaults.withCredentials=!0,r.interceptors.request.use(function(e){let t=localStorage.getItem("jwt");if(!t)return e.headers.Authorization=null,e;if(e.data){let{access_token:n}=JSON.parse(t);return e.headers.Authorization=n,e}let{access_token:n,refresh_token:i}=JSON.parse(t);return e.headers.Authorization=n,e}),r.interceptors.response.use(function(e){return e},async function(e){if(403===e.response.status){let t=null;try{t=localStorage.getItem("jwt");let n=e.config,{refresh_token:i}=JSON.parse(t);i||localStorage.removeItem("jwt");let a=await r.post("/api/signin/refresh",i,{headers:{"Content-Type":"application/json"}});if(a){let{access_token:e}=a.data;return n.headers.Authorization=e,localStorage.setItem("jwt",JSON.stringify({access_token:e})),await r.request(n)}}catch(e){console.log("실행 리플레쉬 실패함요")}}return Promise.reject(e)})},4405:function(e,t,n){"use strict";var i=n(7297),r=n(5944),a=n(6829);function l(){let e=(0,i.Z)(["\n  width: 100%;\n  height: 30px;\n  background-color: #f2f2f2;\n  position: relative;\n  overflow: hidden;\n  border-radius: 4px;\n\n  @keyframes skeleton-gradient {\n    0% {\n      background-color: rgba(165, 165, 165, 0.1);\n    }\n    50% {\n      background-color: rgba(165, 165, 165, 0.3);\n    }\n    100% {\n      background-color: rgba(165, 165, 165, 0.1);\n    }\n  }\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0px;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    animation: skeleton-gradient 1.5s infinite ease-in-out;\n  }\n"]);return l=function(){return e},e}function o(){let e=(0,i.Z)([""]);return o=function(){return e},e}function c(){let e=(0,i.Z)([""]);return c=function(){return e},e}function d(){let e=(0,i.Z)(["\n  margin: 10px 0;\n"]);return d=function(){return e},e}function s(){let e=(0,i.Z)(["\n  height: 130px;\n"]);return s=function(){return e},e}function u(){let e=(0,i.Z)(["\n  display: flex;\n  gap: 12px;\n"]);return u=function(){return e},e}function Z(){let e=(0,i.Z)(["\n  width: 35px;\n  height: 30px;\n  border-radius: 50%;\n  background-color: #f2f2f2;\n  position: relative;\n  top: 10px;\n  overflow: hidden;\n"]);return Z=function(){return e},e}let h=()=>(0,r.tZ)(g,{children:(0,r.BX)(f,{children:[(0,r.tZ)(m,{}),(0,r.BX)(b,{children:[(0,r.tZ)(I,{}),(0,r.tZ)(m,{})]}),(0,r.tZ)(w,{})]},1)}),p=a.Z.div(l()),g=a.Z.ul(o()),f=a.Z.li(c()),m=(0,a.Z)(p)(d()),w=(0,a.Z)(p)(s()),b=a.Z.div(u()),I=(0,a.Z)(p)(Z());t.Z=h},2018:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var i=n(5944),r=n(92),a=n(1230),l=n(1577),o=n(7907),c=n(7294),d=n(2186),s=n(6981),u=n(9899),Z=n(442),h=n(7790),p=n(9014),g=n(5746),f=n(381),m=n.n(f);let{Option:w}=d.Z,{TabPane:b}=s.Z,{Column:I}=r.Z,{TextArea:v}=u.Z;function y(e){let{modalData:t,setModalData:n}=e,[r]=Z.Z.useForm(),[l,d]=(0,c.useState)({...t.data}),s=localStorage.getItem("jwt"),{access_token:f,refresh_token:w}=JSON.parse(s);console.log(l,"상담1");let[b,I]=(0,c.useState)(l.recTags),y=async()=>{let e=[];l.recTags.forEach((t,n)=>{let i=r.getFieldValue(["recTags","".concat(n)]);e.push(i)}),console.log(e,"tagArr");let t={campLogId:r.getFieldValue("campLogId"),createdAt:l.createdAt,description:null,image:l.image,image1:l.image1,image2:l.image2,image3:l.image3,image4:l.image4,image5:l.image5,like:0,recTags:e,siteId:1,title:r.getFieldValue("title"),updatedAt:Date.now(),view:0,visitedAt:l.visitedAt,visitedWith:r.getFieldValue("visitedWith"),writerEmail:r.getFieldValue("writerEmail"),writerNickName:r.getFieldValue("writerNickName")};try{await o.r.patch("/api/camplog/".concat(l.campLogId),{...t}),n({visible:!1,data:{}})}catch(e){h.ZP.error(e)}};return(0,i.tZ)(p.Z,{title:"상세정보",open:!0,closable:!1,maskClosable:!1,width:"80%",style:{top:25,bottom:25},onCancel:()=>{n({visible:!1,data:{}})},onOk:()=>y(),children:(0,i.BX)(Z.Z,{form:r,layout:"vertical",labelAlign:"left",style:{textAlign:"left"},initialValues:l,children:[(0,i.BX)(a.Z,{children:[(0,i.tZ)(g.Z,{span:11,children:(0,i.tZ)(Z.Z.Item,{label:"campLogId",required:!0,tooltip:"campLogId입니다",name:["campLogId"],children:(0,i.tZ)(u.Z,{placeholder:"campLogId 입력해주세요",readOnly:!0})})}),(0,i.tZ)(g.Z,{span:11,offset:2,children:(0,i.tZ)(Z.Z.Item,{label:"생성 일자",required:!0,tooltip:"생성 날짜 입니다",children:(0,i.tZ)(u.Z,{placeholder:"생성일자 입력해주세요",readOnly:!0,value:m()(l.createdAt).format("YYYY-MM-DD")})})})]}),(0,i.BX)(a.Z,{children:[(0,i.tZ)(g.Z,{span:11,children:(0,i.tZ)(Z.Z.Item,{label:"닉네임",required:!0,tooltip:"닉네임를 입력해주세요",name:["writerNickName"],children:(0,i.tZ)(u.Z,{placeholder:"닉네임를 입력해주세요"})})}),(0,i.tZ)(g.Z,{span:11,offset:2,children:(0,i.tZ)(Z.Z.Item,{label:"이메일",required:!0,tooltip:"이메일 입니다",name:["writerEmail"],children:(0,i.tZ)(u.Z,{placeholder:"학원 주소를 입력해주세요",readOnly:!0})})})]}),(0,i.BX)("div",{children:[(0,i.tZ)("span",{style:{color:"#ff4d4f"},children:"* "}),"태그 영역"]}),(0,i.tZ)(a.Z,{children:l.recTags.map((e,t)=>(0,i.tZ)(g.Z,{span:2,offset:1,children:(0,i.tZ)(Z.Z.Item,{label:"태그".concat(t+1),required:!0,tooltip:"리뷰 태그입니다",name:["recTags","".concat(t)],children:(0,i.tZ)(u.Z,{placeholder:"태그"})})},t))}),(0,i.tZ)(a.Z,{children:(0,i.tZ)(g.Z,{span:24,children:(0,i.tZ)(Z.Z.Item,{label:"타이틀",required:!0,tooltip:"title 입니다",name:["title"],children:(0,i.tZ)(u.Z,{placeholder:"title"})})})}),(0,i.tZ)(a.Z,{children:(0,i.tZ)(g.Z,{span:24,children:(0,i.tZ)(Z.Z.Item,{label:"내용",required:!0,tooltip:"description 입니다",name:"description",children:(0,i.tZ)(v,{placeholder:"상담내용 입니다"})})})})]})})}var k=n(4405);let{Column:N}=r.Z;function S(e){let[t,n]=(0,c.useState)([]),[d,s]=(0,c.useState)({visible:!1,data:{}}),[u,Z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{h()},[d]);let h=async()=>{try{let e=await o.r.get("api/camplog");n(e.data.campLogs),Z(!0)}catch(e){console.log(e,"옴?")}};return console.log(t),(0,i.BX)(i.HY,{children:[" ",!u&&(0,i.tZ)(k.Z,{}),u&&(0,i.BX)(i.HY,{children:[d.visible&&(0,i.tZ)(i.HY,{children:(0,i.tZ)(y,{modalData:d,setModalData:s})}),(0,i.tZ)(a.Z,{justify:"start",style:{marginBottom:16}}),(0,i.BX)(r.Z,{style:{marginBottom:100},rowKey:e=>e.campLogId,dataSource:t,rowSelection:{},pagination:{hideOnSinglePage:!0},children:[(0,i.tZ)(N,{title:"생성일자",dataIndex:"createdAt",render:e=>(0,i.tZ)(i.HY,{children:m()(e).format("YYYY-MM-DD")})}),(0,i.tZ)(N,{title:"분류",dataIndex:"visitedWith"}),(0,i.tZ)(N,{title:"타이틀",dataIndex:"title"}),(0,i.tZ)(N,{title:"이메일",dataIndex:"writerEmail"}),(0,i.tZ)(N,{title:"닉네임",dataIndex:"writerNickName"}),(0,i.tZ)(N,{title:()=>(0,i.tZ)(i.HY,{children:"상세"}),width:"7%",align:"center",render:(e,t)=>(0,i.tZ)(i.HY,{children:(0,i.tZ)(l.ZP,{size:"small",type:"ghost",onClick:()=>s({visible:!0,data:t}),children:"더보기"})})},"")]})]})]})}}},function(e){e.O(0,[885,324,343,790,774,888,179],function(){return e(e.s=240)}),_N_E=e.O()}]);